# Django Phone Auth API

Проект на Django с REST API и HTML-страницами для авторизации по номеру телефона, проверки кода и отображения профиля с инвайт-системой.

---

## Возможности

- Авторизация по номеру телефона (с отправкой кода)
- Проверка кода и автоматическая регистрация пользователя
- Генерация уникального инвайт-кода
- Активация чужого инвайт-кода
- Просмотр профиля и приглашённых пользователей
- Поддержка HTML-страниц и API-эндпоинтов

---

## Страницы

| URL              | Назначение                           |
|------------------|---------------------------------------|
| `/register/`     | Страница ввода номера телефона        |
| `/login/`        | Страница ввода кода подтверждения     |
| `/profile/`      | Страница профиля пользователя         |

---

## API Endpoints

### `POST /api/phone/`

Отправка кода на указанный номер телефона. Получение кода.
Если данного пользователя не существует, то она создается и генерируется уникальный `invite_code`.

**Тело запроса:**
```json
{
  "phone": "+77001234567"
}
```

**Ответ:**
```json
{
  "message": "Authorization code sent.",
  "code": "1234"
}
```

---

### `POST /api/verify/`

Проверка кода для авторизации.

**Тело запроса:**
```json
{
  "phone": "+77001234567",
  "code": "1234"
}
```

**Ответ:**
```json
{
  "message": "Authorization successful.",
  "user_id": 1
}
```

---

### `GET /api/profile/<user_id>/`

Получение профиля пользователя. Также получение списка пользователей которые активировали `invite_code` данного пользователя.

**Ответ:**
```json
{
  "id": 1,
  "phone": "+77001234567",
  "invite_code": "X1Y2Z3",
  "activated_invite_code": null,
  "invited_users": [
    {
      "id": 2,
      "phone": "+77001112233"
    }
  ]
}
```

---

### `POST /api/profile/<user_id>/`

Активация `invite_code`. Можно активировать один раз для данного пользователя.
`invite_code` должен существовать.

**Тело запроса:**
```json
{
  "invite_code": "X1Y2Z3"
}
```

**Ответ:**
```json
{
  "message": "Invite-code activated successfully."
}
```
